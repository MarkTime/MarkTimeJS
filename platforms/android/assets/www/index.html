<!DOCTYPE html> 
<html> 
	<head> 
		<title>MarkTimeJS</title> 
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		
		<!-- CSS Definitions -->
		<link rel="stylesheet" href="css/jQuery/jquery.mobile-1.1.0-rc.2.min.css" />
		
		<!-- JavaScript Imports -->
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" src="js/jQuery/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="js/jQuery/jquery.mobile-1.1.0-rc.2.min.js"></script>		
		<script type="text/javascript" src="js/fastclick.js"></script>	
		<script type="text/javascript" src="js/preferences.js"></script>	
	</head> 

	<body> 
		<div data-role="page" id="mainmenu">
			<!-- Header -->
			<div data-role="header">
				<h1>Main Menu</h1>				
			</div>
			
			<!-- Body -->
			
			<div data-role="content" >
			
				<!-- ListView -->
				<ul data-role="listview" data-inset="true">
					<li data-role="list-divider">Plug-ins</li>
					<li><a href="examplepage.html" data-transition="slide">Example UI Page</a></li>
					<li data-role="list-divider">Other</li>
					<li><a href="sync.html" data-transition="slide">Synchronise</a></li>
					<li><a href="settings.html" data-transition="slide">Settings</a></li>
				</ul>			
				
			</div>						
		</div>
<<<<<<< HEAD
	
		<!-- JavaScript Starting Point -->
		<script src="js/index.js"></script>
		<script src="js/preferences.js"></script>
		<script type="text/javascript">			
			var app = {
				bindEvents: function() {
					document.addEventListener('deviceready', this.onDeviceReady, false);
				},
=======
				
		<script type="text/javascript">
		
			var database;
			var fileSystem;
			var preferences;
		
			function initialize(){
				FastClick.attach(document.body);
				window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemAquisition, onError); //Requests the filesystem				
			}					
		
			function bindEvents(){
				document.addEventListener('deviceready', this.onDeviceReady, false);
			}
			
			/* ========== EVENTS ========== */
			
			function onDeviceReady() { //Gets called when the deviceready event gets fired by Cordova				
				initialize();
			}
>>>>>>> 6ba97d36e932e508eafc179dafefe0602597d360

			function myFileCallback(event){
				console.log(event);
				console.log("Called myFileCallback!");
			}
			
			function onFileSystemAquisition(fs){
				fileSystem = fs;			
				preferences = new Preferences("config.cfg", fileSystem);
				preferences.write("foo", "bar");
				preferences.save(myFileCallback);
				//preferences.load(myFileCallback);
			}

			/*function gotFileEntry(fileEntry) {
				console.log("Got fileentry!");
				fileEntry.createWriter(gotFileWriter, fail);
			}
			
			function gotFS1(fileSystem) {
				fileSystem.root.getFile("readme.txt", null, gotFileEntry1, fail);
			}

			function gotFileEntry1(fileEntry) {
				fileEntry.file(gotFile1, fail);
			}

			function gotFile1(file){
				readDataUrl(file);
				readAsText(file);
			}

			function readDataUrl(file) {
				var reader = new FileReader();
				reader.onloadend = function(evt) {
					console.log("Read as data URL");
					console.log(evt.target.result);
				};
				reader.readAsDataURL(file);
			}

			function readAsText(file) {
				var reader = new FileReader();
				reader.onloadend = function(evt) {
					console.log("Read as text");
					console.log(evt.target.result);
				};
				reader.readAsText(file);
			}

			function fail(error) {
				console.log("ERRAH!");
				console.log(error.code);
			}*/
			
			function onError(evt) {
				console.log(evt.target.error.code);
			}
			
			<!-- Start the wheels rolling... -->
			
			bindEvents(); //This is run when the page is loaded
			
		</script>
	</body>
</html>